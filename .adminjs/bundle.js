(function (React) {
  'use strict';

  function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

  var React__default = /*#__PURE__*/_interopDefault(React);

  const UploadImage = ({
    property,
    record,
    onChange
  }) => {
    const [loading, setLoading] = React.useState(false);
    const uploadFile = async event => {
      const file = event.target.files[0];
      if (!file) return;
      setLoading(true);
      const formData = new FormData();
      formData.append("file", file);
      const res = await fetch("/api/upload", {
        method: "POST",
        body: formData
      });
      const data = await res.json();
      setLoading(false);

      // save Cloudinary URL
      onChange(property.name, data.url);
    };
    return /*#__PURE__*/React__default.default.createElement("div", null, /*#__PURE__*/React__default.default.createElement("input", {
      type: "file",
      onChange: uploadFile
    }), loading && /*#__PURE__*/React__default.default.createElement("p", null, "Uploading..."), record.params[property.name] && /*#__PURE__*/React__default.default.createElement("img", {
      src: record.params[property.name],
      alt: "Preview",
      style: {
        width: "200px",
        marginTop: "10px",
        borderRadius: "8px"
      }
    }));
  };

  AdminJS.UserComponents = {};
  AdminJS.UserComponents.UploadImageComponent = UploadImage;

})(React);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlcyI6WyIuLi9hZG1pbmpzLWNvbXBvbmVudHMvVXBsb2FkSW1hZ2UuanN4IiwiZW50cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XHJcblxyXG5jb25zdCBVcGxvYWRJbWFnZSA9ICh7IHByb3BlcnR5LCByZWNvcmQsIG9uQ2hhbmdlIH0pID0+IHtcclxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIGNvbnN0IHVwbG9hZEZpbGUgPSBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XHJcbiAgICBpZiAoIWZpbGUpIHJldHVybjtcclxuXHJcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG5cclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsIGZpbGUpO1xyXG5cclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS91cGxvYWRcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBib2R5OiBmb3JtRGF0YSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcblxyXG4gICAgLy8gc2F2ZSBDbG91ZGluYXJ5IFVSTFxyXG4gICAgb25DaGFuZ2UocHJvcGVydHkubmFtZSwgZGF0YS51cmwpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2PlxyXG4gICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBvbkNoYW5nZT17dXBsb2FkRmlsZX0gLz5cclxuICAgICAge2xvYWRpbmcgJiYgPHA+VXBsb2FkaW5nLi4uPC9wPn1cclxuXHJcbiAgICAgIHtyZWNvcmQucGFyYW1zW3Byb3BlcnR5Lm5hbWVdICYmIChcclxuICAgICAgICA8aW1nXHJcbiAgICAgICAgICBzcmM9e3JlY29yZC5wYXJhbXNbcHJvcGVydHkubmFtZV19XHJcbiAgICAgICAgICBhbHQ9XCJQcmV2aWV3XCJcclxuICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBcIjIwMHB4XCIsIG1hcmdpblRvcDogXCIxMHB4XCIsIGJvcmRlclJhZGl1czogXCI4cHhcIiB9fVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXBsb2FkSW1hZ2U7XHJcbiIsIkFkbWluSlMuVXNlckNvbXBvbmVudHMgPSB7fVxuaW1wb3J0IFVwbG9hZEltYWdlQ29tcG9uZW50IGZyb20gJy4uL2FkbWluanMtY29tcG9uZW50cy9VcGxvYWRJbWFnZSdcbkFkbWluSlMuVXNlckNvbXBvbmVudHMuVXBsb2FkSW1hZ2VDb21wb25lbnQgPSBVcGxvYWRJbWFnZUNvbXBvbmVudCJdLCJuYW1lcyI6WyJVcGxvYWRJbWFnZSIsInByb3BlcnR5IiwicmVjb3JkIiwib25DaGFuZ2UiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsInVzZVN0YXRlIiwidXBsb2FkRmlsZSIsImV2ZW50IiwiZmlsZSIsInRhcmdldCIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInJlcyIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsImRhdGEiLCJqc29uIiwibmFtZSIsInVybCIsIlJlYWN0IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJwYXJhbXMiLCJzcmMiLCJhbHQiLCJzdHlsZSIsIndpZHRoIiwibWFyZ2luVG9wIiwiYm9yZGVyUmFkaXVzIiwiQWRtaW5KUyIsIlVzZXJDb21wb25lbnRzIiwiVXBsb2FkSW1hZ2VDb21wb25lbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7RUFFQSxNQUFNQSxXQUFXLEdBQUdBLENBQUM7SUFBRUMsUUFBUTtJQUFFQyxNQUFNO0VBQUVDLEVBQUFBO0VBQVMsQ0FBQyxLQUFLO0lBQ3RELE1BQU0sQ0FBQ0MsT0FBTyxFQUFFQyxVQUFVLENBQUMsR0FBR0MsY0FBUSxDQUFDLEtBQUssQ0FBQztFQUU3QyxFQUFBLE1BQU1DLFVBQVUsR0FBRyxNQUFPQyxLQUFLLElBQUs7TUFDbEMsTUFBTUMsSUFBSSxHQUFHRCxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDLENBQUMsQ0FBQztNQUNsQyxJQUFJLENBQUNGLElBQUksRUFBRTtNQUVYSixVQUFVLENBQUMsSUFBSSxDQUFDO0VBRWhCLElBQUEsTUFBTU8sUUFBUSxHQUFHLElBQUlDLFFBQVEsRUFBRTtFQUMvQkQsSUFBQUEsUUFBUSxDQUFDRSxNQUFNLENBQUMsTUFBTSxFQUFFTCxJQUFJLENBQUM7RUFFN0IsSUFBQSxNQUFNTSxHQUFHLEdBQUcsTUFBTUMsS0FBSyxDQUFDLGFBQWEsRUFBRTtFQUNyQ0MsTUFBQUEsTUFBTSxFQUFFLE1BQU07RUFDZEMsTUFBQUEsSUFBSSxFQUFFTjtFQUNSLEtBQUMsQ0FBQztFQUVGLElBQUEsTUFBTU8sSUFBSSxHQUFHLE1BQU1KLEdBQUcsQ0FBQ0ssSUFBSSxFQUFFO01BQzdCZixVQUFVLENBQUMsS0FBSyxDQUFDOztFQUVqQjtNQUNBRixRQUFRLENBQUNGLFFBQVEsQ0FBQ29CLElBQUksRUFBRUYsSUFBSSxDQUFDRyxHQUFHLENBQUM7SUFDbkMsQ0FBQztFQUVELEVBQUEsb0JBQ0VDLHNCQUFBLENBQUFDLGFBQUEsQ0FBQSxLQUFBLEVBQUEsSUFBQSxlQUNFRCxzQkFBQSxDQUFBQyxhQUFBLENBQUEsT0FBQSxFQUFBO0VBQU9DLElBQUFBLElBQUksRUFBQyxNQUFNO0VBQUN0QixJQUFBQSxRQUFRLEVBQUVJO0tBQWEsQ0FBQyxFQUMxQ0gsT0FBTyxpQkFBSW1CLHNCQUFBLENBQUFDLGFBQUEsQ0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFHLGNBQWUsQ0FBQyxFQUU5QnRCLE1BQU0sQ0FBQ3dCLE1BQU0sQ0FBQ3pCLFFBQVEsQ0FBQ29CLElBQUksQ0FBQyxpQkFDM0JFLHNCQUFBLENBQUFDLGFBQUEsQ0FBQSxLQUFBLEVBQUE7TUFDRUcsR0FBRyxFQUFFekIsTUFBTSxDQUFDd0IsTUFBTSxDQUFDekIsUUFBUSxDQUFDb0IsSUFBSSxDQUFFO0VBQ2xDTyxJQUFBQSxHQUFHLEVBQUMsU0FBUztFQUNiQyxJQUFBQSxLQUFLLEVBQUU7RUFBRUMsTUFBQUEsS0FBSyxFQUFFLE9BQU87RUFBRUMsTUFBQUEsU0FBUyxFQUFFLE1BQU07RUFBRUMsTUFBQUEsWUFBWSxFQUFFO0VBQU07RUFBRSxHQUNuRSxDQUVBLENBQUM7RUFFVixDQUFDOztFQ3hDREMsT0FBTyxDQUFDQyxjQUFjLEdBQUcsRUFBRTtFQUUzQkQsT0FBTyxDQUFDQyxjQUFjLENBQUNDLG9CQUFvQixHQUFHQSxXQUFvQjs7Ozs7OyJ9
